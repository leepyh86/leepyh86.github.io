(function(b,a){if(typeof exports==="object"){module.exports=a()}else{if(typeof define==="function"&&define.amd){define(a)}else{b.NTESAntAnalysis=a()}}})(this,function(){function m(){function C(J){var H="";var K;for(K=0;K<J.length;K++){var I=J.charCodeAt(K);var G="";if(I>255){while(I>=1){G="0123456789".charAt(I%10)+G;I=I/10}if(G==""){G="0"}G="#"+G;G="&"+G;G=G+";";H+=G}else{H+=J.charAt(K)}}return H}var w=8;var r=0;function q(G){return F(z(p(G),G.length*w))}function z(G,L){G[L>>5]|=128<<((L)%32);G[(((L+64)>>>9)<<4)+14]=L;var H=1732584193;var I=-271733879;var J=-1732584194;var K=271733878;for(var O=0;O<G.length;O+=16){var M=H;var N=I;var P=J;var Q=K;H=x(H,I,J,K,G[O+0],7,-680876936);K=x(K,H,I,J,G[O+1],12,-389564586);J=x(J,K,H,I,G[O+2],17,606105819);I=x(I,J,K,H,G[O+3],22,-1044525330);H=x(H,I,J,K,G[O+4],7,-176418897);K=x(K,H,I,J,G[O+5],12,1200080426);J=x(J,K,H,I,G[O+6],17,-1473231341);I=x(I,J,K,H,G[O+7],22,-45705983);H=x(H,I,J,K,G[O+8],7,1770035416);K=x(K,H,I,J,G[O+9],12,-1958414417);J=x(J,K,H,I,G[O+10],17,-42063);I=x(I,J,K,H,G[O+11],22,-1990404162);H=x(H,I,J,K,G[O+12],7,1804603682);K=x(K,H,I,J,G[O+13],12,-40341101);J=x(J,K,H,I,G[O+14],17,-1502002290);I=x(I,J,K,H,G[O+15],22,1236535329);H=t(H,I,J,K,G[O+1],5,-165796510);K=t(K,H,I,J,G[O+6],9,-1069501632);J=t(J,K,H,I,G[O+11],14,643717713);I=t(I,J,K,H,G[O+0],20,-373897302);H=t(H,I,J,K,G[O+5],5,-701558691);K=t(K,H,I,J,G[O+10],9,38016083);J=t(J,K,H,I,G[O+15],14,-660478335);I=t(I,J,K,H,G[O+4],20,-405537848);H=t(H,I,J,K,G[O+9],5,568446438);K=t(K,H,I,J,G[O+14],9,-1019803690);J=t(J,K,H,I,G[O+3],14,-187363961);I=t(I,J,K,H,G[O+8],20,1163531501);H=t(H,I,J,K,G[O+13],5,-1444681467);K=t(K,H,I,J,G[O+2],9,-51403784);J=t(J,K,H,I,G[O+7],14,1735328473);I=t(I,J,K,H,G[O+12],20,-1926607734);H=E(H,I,J,K,G[O+5],4,-378558);K=E(K,H,I,J,G[O+8],11,-2022574463);J=E(J,K,H,I,G[O+11],16,1839030562);I=E(I,J,K,H,G[O+14],23,-35309556);H=E(H,I,J,K,G[O+1],4,-1530992060);K=E(K,H,I,J,G[O+4],11,1272893353);J=E(J,K,H,I,G[O+7],16,-155497632);I=E(I,J,K,H,G[O+10],23,-1094730640);H=E(H,I,J,K,G[O+13],4,681279174);K=E(K,H,I,J,G[O+0],11,-358537222);J=E(J,K,H,I,G[O+3],16,-722521979);I=E(I,J,K,H,G[O+6],23,76029189);H=E(H,I,J,K,G[O+9],4,-640364487);K=E(K,H,I,J,G[O+12],11,-421815835);J=E(J,K,H,I,G[O+15],16,530742520);I=E(I,J,K,H,G[O+2],23,-995338651);H=u(H,I,J,K,G[O+0],6,-198630844);K=u(K,H,I,J,G[O+7],10,1126891415);J=u(J,K,H,I,G[O+14],15,-1416354905);I=u(I,J,K,H,G[O+5],21,-57434055);H=u(H,I,J,K,G[O+12],6,1700485571);K=u(K,H,I,J,G[O+3],10,-1894986606);J=u(J,K,H,I,G[O+10],15,-1051523);I=u(I,J,K,H,G[O+1],21,-2054922799);H=u(H,I,J,K,G[O+8],6,1873313359);K=u(K,H,I,J,G[O+15],10,-30611744);J=u(J,K,H,I,G[O+6],15,-1560198380);I=u(I,J,K,H,G[O+13],21,1309151649);H=u(H,I,J,K,G[O+4],6,-145523070);K=u(K,H,I,J,G[O+11],10,-1120210379);J=u(J,K,H,I,G[O+2],15,718787259);I=u(I,J,K,H,G[O+9],21,-343485551);H=v(H,M);I=v(I,N);J=v(J,P);K=v(K,Q)}return Array(H,I,J,K)}function s(G,J,K,L,H,I){return v(D(v(v(J,G),v(L,I)),H),K)}function x(K,L,G,H,M,I,J){return s((L&G)|((~L)&H),K,L,M,I,J)}function t(K,L,G,H,M,I,J){return s((L&H)|(G&(~H)),K,L,M,I,J)}function E(K,L,G,H,M,I,J){return s(L^G^H,K,L,M,I,J)}function u(K,L,G,H,M,I,J){return s(G^(L|(~H)),K,L,M,I,J)}function v(H,I){var J=(H&65535)+(I&65535);var G=(H>>16)+(I>>16)+(J>>16);return(G<<16)|(J&65535)}function D(H,G){return(H<<G)|(H>>>(32-G))}function p(I){var J=new Array();var H=(1<<w)-1;for(var G=0;G<I.length*w;G+=w){J[G>>5]|=(I.charCodeAt(G/w)&H)<<(G%32)}return J}function F(J){var G=r?"0123456789ABCDEF":"0123456789abcdef";var I="";for(var H=0;H<J.length*4;H++){I+=G.charAt((J[H>>2]>>((H%4)*8+4))&15)+G.charAt((J[H>>2]>>((H%4)*8))&15)}return I}var y=new Date();var A=document.body.clientWidth+":"+document.body.clientHeight;var B=C(y.getTime()+document.location+screen.width+screen.height+navigator.userAgent+Math.random()+A);return q(B)}function l(v){var q=document.cookie;var u=v+"=";var r=q.length;var p=0;while(p<r){var t=p+u.length;if(q.substring(p,t)==u){var s=q.indexOf(";",t);if(s==-1){s=r}return unescape(q.substring(t,s))}p=q.indexOf(" ",p)+1;if(p==0){break}}return -1}function h(){return(/baiduspider/ig).test(navigator.userAgent)}function f(q){if(!q){return q}for(var p=1,s=arguments.length;p<s;p++){var t=arguments[p];if(t){for(var r in t){if(typeof q[r]=="undefined"){q[r]=t[r]}}}}return q}function d(){var t=window.location.href;var u=t.split("?")[1];var s={};if(u){var q,p=u.split("&");for(q=0;q<p.length;q++){var r=p[q].split("=");s[r[0]]=r[1]}}return s}function g(v,p){var t=l(v),u=l(p);return t==-1?u==-1?"":u:t}function i(){if(location.protocol=="https:"){window.addEventListener("message",function(r){localStorage.setItem("ntesSpsuid",r.data.ntesSpsuid)})}else{var q=location.href.replace("http","https");var p=document.createElement("iframe");p.setAttribute("src",q);p.setAttribute("width",0);p.setAttribute("height",0);p.setAttribute("tabindex",-1);p.setAttribute("style","display:none;");p.setAttribute("class","ntesanalysis-sync-iframe");p.setAttribute("onerror","error('fail to load:"+q+"')");document.body.appendChild(p);
window.onload=function(){document.querySelector(".ntesanalysis-sync-iframe").contentWindow.postMessage({ntesSpsuid:localStorage.getItem("ntesSpsuid")},q)}}}function e(q,t,r){if(!+(r)||+(r)<0){r=5000}var s=setTimeout(function(){p.remove()},r);var p=document.createElement("iframe");p.setAttribute("width",0);p.setAttribute("height",0);p.setAttribute("tabindex",-1);p.setAttribute("style","display:none;");p.setAttribute("class","ntesanalysis-sync-iframe");document.body.appendChild(p);p.onload=function(){if(s){clearTimeout(s)}var u;try{var w=(p.contentWindow||p.contentDocument).location.href;u="loaded";t(u)}catch(v){u="UrlLoadedButContentCannotBeAccessed";p.remove()}};p.setAttribute("src",q)}function k(){var p=window.localStorage.getItem("ntesSpsuid");if(!p){p=m();window.localStorage.setItem("ntesSpsuid",p)}return p}function a(w){var v={};var r=navigator.userAgent;var q=document.referrer;var u=k();var s="";if(r.match(/micromessenger/gi)){s=(b.from)?"wx:"+b.from:"wx"}else{if(r.match(/weibo/gi)){s="wb"}else{if(r.match(/yixin/gi)){s="yx"}else{if(r.match(/qq/gi)){s="qq"}else{if(q.match(/weibo\.com/)){s="wb"}else{if(q.match(/qq\.com/)||q.match(/qzone\.com/)){s="qq"}}}}}}var p=(b.spss)?b.spss:((r.match(/newsapp/gi))?"native":(document.referrer.match(/163.com/gi))?"163":"other");v={ct:s,source:p,uid:u,channel:b.spsc?b.spsc:"",val_act:"",val_url:b.currentURL,uname:g("P_INFO","P_OINFO").split("|")[0],val_ref:b.referrerURL,sc:screen.width+"*"+screen.height,info:{spstitle:b.title,spssid:b.spssid?b.spssid:"",spsw:b.spsw?b.spsw:1}};if(w&&w.info){w.info=f(v.info,w.info)}var t=f(w,v);if(t.callback){delete t.callback}window.params=t;return t}function n(s){s.tm=new Date().getTime();var r=encodeURIComponent(JSON.stringify(s));var q="https://h5.analytics.126.net/news/c?"+r;if(!window["ntesAnalysisImage"]){var p=new Image();window["ntesAnalysisImage"]=p}window["ntesAnalysisImage"].src=q}function j(){var q="";var u=window.location.href;var t=k();if(u.indexOf("?")!=-1){var r=u.match(/spsw=\d+/g);if(r){var p=parseInt(b.spsw)+1;q=u.replace(/spsw=\d+/g,"spsw="+p)}else{q=u+"&spsw=1"}var s=u.match(/spssid=\w+/g);if(s){q=q.replace(/spssid=\w+/g,"spssid="+t)}else{q=q+"&spssid="+t}}else{q=u+"?spssid="+t+"&spsw=1"}return q}function o(r){if(h()){return}var p=r.callback;var q=a(r);n(q);(r&&p)?p():""}var b=d();b.title=document.title;b.currentURL=document.location.href;b.referrerURL=document.referrer;var c={sendData:o,getShareLink:j};return c});